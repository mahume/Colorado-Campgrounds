{"ast":null,"code":"import _objectSpread from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/src/pages/Signup.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport SignupForm from '../components/SignupForm';\n\nvar Signup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Signup)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: '',\n      password: '',\n      confirmPassword: ''\n    };\n\n    _this.handleChange = function (e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (e) {\n      console.log('sign-up handleSubmit, username: ');\n      console.log(_this.state.username);\n      e.preventDefault(); //request to server to add a new username/password\n\n      axios.post('/api/users', {\n        username: _this.state.username,\n        password: _this.state.password\n      }).then(function (response) {\n        console.log(response);\n\n        if (!response.data.errmsg && response.data) {\n          console.log('successful signup');\n          axios.post('/api/users/login', _objectSpread({}, response.data, {\n            password: _this.state.password\n          })).then(function (response2) {\n            console.log(response2.data);\n\n            _this.props.history.push('/');\n          }).catch(function (error) {\n            return console.error(error);\n          });\n        } else {\n          console.log('username already taken');\n        }\n      }).catch(function (error) {\n        console.log('signup error: ');\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(SignupForm, {\n        username: this.state.username,\n        password: this.state.password,\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\nexport default withRouter(Signup);","map":{"version":3,"sources":["/Users/mhume/code/learn/du-boot-camp/my-work/projects/colorado-campgrounds/client/src/pages/Signup.js"],"names":["React","Component","withRouter","axios","SignupForm","Signup","state","username","password","confirmPassword","handleChange","e","target","name","value","setState","handleSubmit","console","log","preventDefault","post","then","response","data","errmsg","response2","props","history","push","catch","error"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;;IAEMC,M;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,eAAe,EAAE;AAHX,K;;UAKTC,Y,GAAe,UAAAC,CAAC,EAAI;AAAA,sBACOA,CAAC,CAACC,MADT;AAAA,UACTC,IADS,aACTA,IADS;AAAA,UACHC,KADG,aACHA,KADG;;AAEjB,YAAKC,QAAL,qBACAF,IADA,EACOC,KADP;AAGF,K;;UACDE,Y,GAAe,UAAAL,CAAC,EAAI;AACnBM,MAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKZ,KAAL,CAAWC,QAAvB;AACAI,MAAAA,CAAC,CAACQ,cAAF,GAHmB,CAKnB;;AACEhB,MAAAA,KAAK,CACFiB,IADH,CACQ,YADR,EACsB;AAClBb,QAAAA,QAAQ,EAAE,MAAKD,KAAL,CAAWC,QADH;AAElBC,QAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWE;AAFH,OADtB,EAKAa,IALA,CAKK,UAAAC,QAAQ,EAAI;AACjBL,QAAAA,OAAO,CAACC,GAAR,CAAYI,QAAZ;;AACA,YAAI,CAACA,QAAQ,CAACC,IAAT,CAAcC,MAAf,IAAyBF,QAAQ,CAACC,IAAtC,EAA4C;AAC3CN,UAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACKf,UAAAA,KAAK,CAACiB,IAAN,CAAW,kBAAX,oBAAoCE,QAAQ,CAACC,IAA7C;AAAmDf,YAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWE;AAAxE,cACGa,IADH,CACQ,UAAAI,SAAS,EAAI;AACjBR,YAAAA,OAAO,CAACC,GAAR,CAAYO,SAAS,CAACF,IAAtB;;AACA,kBAAKG,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,WAJH,EAKGC,KALH,CAKS,UAAAC,KAAK;AAAA,mBAAIb,OAAO,CAACa,KAAR,CAAcA,KAAd,CAAJ;AAAA,WALd;AAML,SARD,MAQO;AACNb,UAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA;AACE,OAlBH,EAmBGW,KAnBH,CAmBS,UAAAC,KAAK,EAAI;AAClBb,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYY,KAAZ;AACA,OAtBA;AAuBF,K;;;;;;;6BAES;AACP,aACE,oBAAC,UAAD;AACE,QAAA,QAAQ,EAAE,KAAKxB,KAAL,CAAWC,QADvB;AAEE,QAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWE,QAFvB;AAGE,QAAA,YAAY,EAAE,KAAKE,YAHrB;AAIE,QAAA,YAAY,EAAE,KAAKM,YAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAQD;;;;EApDkBf,S;;AAuDrB,eAAeC,UAAU,CAACG,MAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport SignupForm from '../components/SignupForm';\n\nclass Signup extends Component {\n  state = {\n    username: '',\n    password: '',\n    confirmPassword: '',\n  }\n\thandleChange = e => {\n    const { name, value } = e.target;\n    this.setState({\n\t\t\t[name]: value\n\t\t})\n\t}\n\thandleSubmit = e => {\n\t\tconsole.log('sign-up handleSubmit, username: ');\n\t\tconsole.log(this.state.username);\n\t\te.preventDefault();\n\n\t\t//request to server to add a new username/password\n    axios\n      .post('/api/users', {\n        username: this.state.username,\n        password: this.state.password\n      })\n\t\t\t.then(response => {\n\t\t\t\tconsole.log(response)\n\t\t\t\tif (!response.data.errmsg && response.data) {\n\t\t\t\t\tconsole.log('successful signup')\n          axios.post('/api/users/login', { ...response.data, password: this.state.password })\n            .then(response2 => {\n              console.log(response2.data);\n              this.props.history.push('/');\n            })\n            .catch(error => console.error(error));\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('username already taken')\n\t\t\t\t}\n      })\n      .catch(error => {\n\t\t\t\tconsole.log('signup error: ')\n\t\t\t\tconsole.log(error)\n\t\t\t})\n\t}\n\n  render() {\n    return (\n      <SignupForm\n        username={this.state.username}\n        password={this.state.password}\n        handleChange={this.handleChange}\n        handleSubmit={this.handleSubmit}\n      />\n    )\n  }\n}\n\nexport default withRouter(Signup);"]},"metadata":{},"sourceType":"module"}