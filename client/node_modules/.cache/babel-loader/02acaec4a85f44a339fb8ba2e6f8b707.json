{"ast":null,"code":"import _defineProperty from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/src/pages/Login.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport LoginForm from '../components/LoginForm';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: '',\n      password: '',\n      redirectTo: null\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      console.log('handleSubmit');\n      axios.post('/user/login', {\n        username: _this.state.username,\n        password: _this.state.password\n      }).then(function (response) {\n        console.log('login response: ');\n        console.log(response);\n\n        if (response.status === 200) {\n          // update App.js state\n          _this.props.updateUser({\n            loggedIn: true,\n            username: response.data.username\n          }); // update the state to redirect to home\n\n\n          _this.setState({\n            redirectTo: '/'\n          });\n        }\n      }).catch(function (error) {\n        console.log('login error: ');\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      if (this.state.redirectTo) {\n        return React.createElement(Redirect, {\n          to: {\n            pathname: this.state.redirectTo\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(LoginForm, {\n          username: this.state.username,\n          password: this.state.password,\n          handleChange: this.handleChange,\n          handleSubmit: this.handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/src/pages/Login.js"],"names":["React","Component","Redirect","axios","LoginForm","Login","state","username","password","redirectTo","handleChange","event","setState","target","name","value","handleSubmit","preventDefault","console","log","post","then","response","status","props","updateUser","loggedIn","data","catch","error","pathname"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;;IAEMC,K;;;;;;;;;;;;;;;;;UAWJC,K,GAAQ;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,UAAU,EAAE;AAHN,K;;UAKRC,Y,GAAe,UAACC,KAAD,EAAW;AACtB,YAAKC,QAAL,qBACKD,KAAK,CAACE,MAAN,CAAaC,IADlB,EACyBH,KAAK,CAACE,MAAN,CAAaE,KADtC;AAGH,K;;UAEDC,Y,GAAe,UAACL,KAAD,EAAW;AACtBA,MAAAA,KAAK,CAACM,cAAN;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AAEAhB,MAAAA,KAAK,CACAiB,IADL,CACU,aADV,EACyB;AACjBb,QAAAA,QAAQ,EAAE,MAAKD,KAAL,CAAWC,QADJ;AAEjBC,QAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWE;AAFJ,OADzB,EAKKa,IALL,CAKU,UAAAC,QAAQ,EAAI;AACdJ,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYG,QAAZ;;AACA,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AACzB;AACA,gBAAKC,KAAL,CAAWC,UAAX,CAAsB;AAClBC,YAAAA,QAAQ,EAAE,IADQ;AAElBnB,YAAAA,QAAQ,EAAEe,QAAQ,CAACK,IAAT,CAAcpB;AAFN,WAAtB,EAFyB,CAMzB;;;AACA,gBAAKK,QAAL,CAAc;AACVH,YAAAA,UAAU,EAAE;AADF,WAAd;AAGH;AACJ,OAnBL,EAmBOmB,KAnBP,CAmBa,UAAAC,KAAK,EAAI;AACdX,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYU,KAAZ;AAEH,OAvBL;AAwBH,K;;;;;;;6BAEQ;AACP,UAAI,KAAKvB,KAAL,CAAWG,UAAf,EAA2B;AACzB,eAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAE;AAAEqB,YAAAA,QAAQ,EAAE,KAAKxB,KAAL,CAAWG;AAAvB,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFD,MAEO;AACL,eACE,oBAAC,SAAD;AACE,UAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWC,QADvB;AAEE,UAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWE,QAFvB;AAGE,UAAA,YAAY,EAAE,KAAKE,YAHrB;AAIE,UAAA,YAAY,EAAE,KAAKM,YAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAQD;AACF;;;;EAjEiBf,S;;AAoEpB,eAAeI,KAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom'\nimport axios from 'axios';\nimport LoginForm from '../components/LoginForm';\n\nclass Login extends Component {\n  // constructor() {\n  //   super()\n  //   this.state = {\n  //       username: '',\n  //       password: '',\n  //       redirectTo: null\n  //   }\n  //   this.handleChange = this.handleChange.bind(this)\n  //   this.handleSubmit = this.handleSubmit.bind(this)\n  // }\n  state = {\n    username: '',\n    password: '',\n    redirectTo: null\n  }\n  handleChange = (event) => {\n      this.setState({\n          [event.target.name]: event.target.value\n      })\n  }\n\n  handleSubmit = (event) => {\n      event.preventDefault()\n      console.log('handleSubmit')\n\n      axios\n          .post('/user/login', {\n              username: this.state.username,\n              password: this.state.password\n          })\n          .then(response => {\n              console.log('login response: ')\n              console.log(response)\n              if (response.status === 200) {\n                  // update App.js state\n                  this.props.updateUser({\n                      loggedIn: true,\n                      username: response.data.username\n                  })\n                  // update the state to redirect to home\n                  this.setState({\n                      redirectTo: '/'\n                  })\n              }\n          }).catch(error => {\n              console.log('login error: ')\n              console.log(error);\n              \n          })\n  }\n\n  render() {\n    if (this.state.redirectTo) {\n      return <Redirect to={{ pathname: this.state.redirectTo }} />\n    } else {\n      return (\n        <LoginForm \n          username={this.state.username}\n          password={this.state.password}\n          handleChange={this.handleChange}\n          handleSubmit={this.handleSubmit}\n        />\n      )\n    }\n  }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}