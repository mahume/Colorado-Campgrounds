{"ast":null,"code":"import _defineProperty from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/src/pages/Login.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport LoginForm from '../components/LoginForm';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: '',\n      password: '',\n      redirectTo: null\n    };\n\n    _this.handleChange = function (e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      axios.post('/user/login', {\n        username: _this.state.username,\n        password: _this.state.password\n      }).then(function (response) {\n        console.log('login response: ');\n        console.log(response);\n\n        if (response.status === 200) {\n          // update App.js state\n          _this.props.updateUser({\n            loggedIn: true,\n            username: response.data.username\n          }); // update the state to redirect to home\n\n\n          _this.setState({\n            redirectTo: '/'\n          });\n        }\n      }).catch(function (error) {\n        console.log('login error: ');\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      if (this.state.redirectTo) {\n        return React.createElement(Redirect, {\n          to: {\n            pathname: this.state.redirectTo\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(LoginForm, {\n          username: this.state.username,\n          password: this.state.password,\n          handleChange: this.handleChange,\n          handleSubmit: this.handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/Users/mhume/code/learn/du-boot-camp/my-work/projects/Colorado-Campgrounds/client/src/pages/Login.js"],"names":["React","Component","Redirect","axios","LoginForm","Login","state","username","password","redirectTo","handleChange","e","target","name","value","setState","handleSubmit","preventDefault","post","then","response","console","log","status","props","updateUser","loggedIn","data","catch","error","pathname"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;;IAEMC,K;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,UAAU,EAAE;AAHN,K;;UAKRC,Y,GAAe,UAAAC,CAAC,EAAI;AAAA,sBACMA,CAAC,CAACC,MADR;AAAA,UACVC,IADU,aACVA,IADU;AAAA,UACJC,KADI,aACJA,KADI;;AAElB,YAAKC,QAAL,qBACKF,IADL,EACYC,KADZ;AAGD,K;;UACDE,Y,GAAe,UAAAL,CAAC,EAAI;AAChBA,MAAAA,CAAC,CAACM,cAAF;AACAd,MAAAA,KAAK,CACFe,IADH,CACQ,aADR,EACuB;AACnBX,QAAAA,QAAQ,EAAE,MAAKD,KAAL,CAAWC,QADF;AAEnBC,QAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWE;AAFF,OADvB,EAKGW,IALH,CAKQ,UAAAC,QAAQ,EAAI;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,YAAIA,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3B;AACA,gBAAKC,KAAL,CAAWC,UAAX,CAAsB;AACpBC,YAAAA,QAAQ,EAAE,IADU;AAEpBnB,YAAAA,QAAQ,EAAEa,QAAQ,CAACO,IAAT,CAAcpB;AAFJ,WAAtB,EAF2B,CAM3B;;;AACA,gBAAKQ,QAAL,CAAc;AACZN,YAAAA,UAAU,EAAE;AADA,WAAd;AAGD;AACF,OAnBH,EAoBGmB,KApBH,CAoBS,UAAAC,KAAK,EAAI;AACdR,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ;AACD,OAvBH;AAwBH,K;;;;;;;6BACQ;AACP,UAAI,KAAKvB,KAAL,CAAWG,UAAf,EAA2B;AACzB,eAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAE;AAAEqB,YAAAA,QAAQ,EAAE,KAAKxB,KAAL,CAAWG;AAAvB,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFD,MAEO;AACL,eACE,oBAAC,SAAD;AACE,UAAA,QAAQ,EAAE,KAAKH,KAAL,CAAWC,QADvB;AAEE,UAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWE,QAFvB;AAGE,UAAA,YAAY,EAAE,KAAKE,YAHrB;AAIE,UAAA,YAAY,EAAE,KAAKM,YAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAQD;AACF;;;;EApDiBf,S;;AAuDpB,eAAeI,KAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom'\nimport axios from 'axios';\nimport LoginForm from '../components/LoginForm';\n\nclass Login extends Component {\n  state = {\n    username: '',\n    password: '',\n    redirectTo: null\n  }\n  handleChange = e => {\n    const { name, value } = e.target;\n    this.setState({\n        [name]: value\n    })\n  }\n  handleSubmit = e => {\n      e.preventDefault()\n      axios\n        .post('/user/login', {\n          username: this.state.username,\n          password: this.state.password\n        })\n        .then(response => {\n          console.log('login response: ')\n          console.log(response)\n          if (response.status === 200) {\n            // update App.js state\n            this.props.updateUser({\n              loggedIn: true,\n              username: response.data.username\n            })\n            // update the state to redirect to home\n            this.setState({\n              redirectTo: '/'\n            })\n          }\n        })\n        .catch(error => {\n          console.log('login error: ')\n          console.log(error);    \n        })\n  }\n  render() {\n    if (this.state.redirectTo) {\n      return <Redirect to={{ pathname: this.state.redirectTo }} />\n    } else {\n      return (\n        <LoginForm \n          username={this.state.username}\n          password={this.state.password}\n          handleChange={this.handleChange}\n          handleSubmit={this.handleSubmit}\n        />\n      )\n    }\n  }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}